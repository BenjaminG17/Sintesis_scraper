{
  "modules": [
    {
      "id": "municipio_generico",
      "url_pattern": "https://www.portaltransparencia.cl/PortalPdT/directorio-de-organismos-regulados/?org={org}",

      "actions": [],

      "scraping_actions": [
        {
          "type": "open_tipo_personal",
          "options": [
            {
              "value": "CONTRATA",
              "xpaths": [
                "//a[contains(translate(normalize-space(.), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'personal a contrata')]",
                "//a[contains(normalize-space(.), 'Personal a Contrata')]",
                "//a[contains(normalize-space(.), 'Personal a contrata')]"
              ]
            },
            {
              "value": "PLANTA",
              "xpaths": [
                "//a[contains(translate(normalize-space(.), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'personal de planta')]",
                "//a[contains(normalize-space(.), 'Personal de Planta')]",
                "//a[contains(normalize-space(.), 'Personal de planta')]",
                "//a[contains(normalize-space(.), 'Personal a Planta')]"
              ]
            }
          ]
        },    
        {
          "type": "select_area",
          "options": [
            {
              "value": "MUNICIPAL",
              "xpaths": [
                "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), 'municipal')]",
                "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), 'municipalidad')]",
                "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), 'municipio')]",
                "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), 'personal a contrata')]",
                "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), 'personal de planta')]"
              ]
            }
          ]
        },
        {
          "type": "select_anio",
          "year_patterns": [
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content') or contains(@class, 'panel-content')]//a[contains(normalize-space(.), 'Municipal {YEAR}')]",
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(normalize-space(.), 'Año {YEAR}')]",
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(normalize-space(.), 'AÑO {YEAR}')]",
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content') or contains(@class, 'panel-content')]//a[contains(normalize-space(.), 'nicipio {YEAR}')]",
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content') or contains(@class, 'year-selector')]//a[normalize-space(.)='{YEAR}']",
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(normalize-space(.), 'Municipalidad {YEAR}')]", 
            
            
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//*[contains(translate(text(), 'AÁÉÍÓÚÑ', 'AAEIOUN'), 'MUNICIPAL') and contains(text(), '{YEAR}')]",
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(normalize-space(.), 'año {YEAR}')]",
             
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), 'personal a contrata {YEAR}')]",
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), 'personal de planta {YEAR}')]"          ]
        },
        {
          "type": "select_mes",
          "month_patterns": [
            
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content') or contains(@class, 'month-selector')]//a[normalize-space(.)='{MONTH}' and not(contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), 'registro histórico'))]",
            
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(normalize-space(.), '{MONTH}') and not(contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), 'registro histórico'))]",
            
            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), '{MONTH_LOWER}') and not(contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), 'registro histórico'))]",  

            "//div[contains(@class, 'tabs-content') or contains(@class, 'tab-content')]//a[contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), '{MONTH_PARTIAL}') and not(contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), 'registro histórico'))]"                    
          ]
        },
        {
          "type": "download_csv",
          "xpaths": [
            "//button[contains(normalize-space(.), 'Descargar CSV')]"          
          ]
        }
      ]
    }
  ]
}
