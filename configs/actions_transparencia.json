{
  "modules": [
    {
      "id": "municipio_generico",
      "url_pattern": "https://www.portaltransparencia.cl/PortalPdT/directorio-de-organismos-regulados/?org={org}",

      "actions": [],

      "scraping_actions": [
        {
          "type": "open_tipo_personal",
          "options": [
            {
              "value": "CONTRATA",
              "xpaths": [
                "//a[contains(translate(normalize-space(.), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'personal a contrata')]",
                "//a[contains(normalize-space(.), 'Personal a Contrata')]",
                "//a[contains(normalize-space(.), 'Personal a contrata')]"
              ]
            },
            {
              "value": "PLANTA",
              "xpaths": [
                "//a[contains(translate(normalize-space(.), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), 'personal de planta')]",
                "//a[contains(normalize-space(.), 'Personal de Planta')]",
                "//a[contains(normalize-space(.), 'Personal de planta')]",
                "//a[contains(normalize-space(.), 'Personal a Planta')]"
              ]
            }
          ]
        },    
        {
          "type": "select_area",
          "options": [
            {
              "value": "MUNICIPAL",
              "xpaths": [
                "//a[contains(@class,'tab-link') and normalize-space(.)='Municipal']",
                "//a[contains(@class,'tab-link') and normalize-space(.)='Municipalidad']",

                "//a[normalize-space(.)='Municipalidad']",
                "//a[normalize-space(.)='Municipal']",

                
                "//a[contains(normalize-space(.), 'Personal a Contrata Municipal')]",
                "//a[contains(normalize-space(.), 'Personal de Planta Municipal')]"
                
              ]
            }
          ]
        },
        {
          "type": "select_anio",
          "year_patterns": [
            "//a[contains(normalize-space(.), 'Municipal {YEAR}')]",
            "//a[contains(normalize-space(.), 'Año {YEAR}')]",
            "//a[contains(normalize-space(.), 'AÑO {YEAR}')]",
            "//a[normalize-space(.)='{YEAR}']",
            "//a[contains(normalize-space(.), 'Municipalidad {YEAR}')]",   
            "//*[contains(translate(text(), 'AÁÉÍÓÚÑ', 'AAEIOUN'), 'MUNICIPAL') and contains(text(), '{YEAR}')]"
          ]
        },
        {
          "type": "select_mes",
          "month_patterns": [
            
            "//a[normalize-space(.)='{MONTH}']",
            "//a[contains(normalize-space(.), '{MONTH}')]",
            "//a[contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), '{MONTH_LOWER}')]",
            "//a[contains(translate(normalize-space(.), 'ÁÉÍÓÚÜÑABCDEFGHIJKLMNOPQRSTUVWXYZ', 'áéíóúüñabcdefghijklmnopqrstuvwxyz'), '{MONTH_PARTIAL}')]"
          ]
        },
        {
          "type": "download_csv",
          "xpaths": [
            "//button[contains(normalize-space(.), 'Descargar CSV')]",          
            "//button[contains(translate(normalize-space(.), 'ABCDEFGHIJKLMNOPQRSTUVWXYZÁÉÍÓÚÜÑ', 'abcdefghijklmnopqrstuvwxyzáéíóúüñ'), 'descargar csv')]"
          ]
        }
      ]
    }
  ]
}
